<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 420">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .label-left { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: start; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-small { font: 500 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; letter-spacing: 1px; }
      .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
      .layer-label { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #fff; text-anchor: middle; }
      .task-text { font: 400 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: start; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>

    <!-- Pattern for Enhancement Layer (LLM) -->
    <pattern id="dots-enhance" width="8" height="8" patternUnits="userSpaceOnUse">
      <circle cx="4" cy="4" r="1.2" fill="#7c3aed" opacity="0.4"/>
    </pattern>

    <!-- Pattern for Decision Layer -->
    <pattern id="diagonal-decide" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#0891b2" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Pattern for Execution Layer -->
    <pattern id="grid-exec" width="8" height="8" patternUnits="userSpaceOnUse">
      <rect width="8" height="8" fill="none"/>
      <path d="M 8 0 L 0 0 0 8" fill="none" stroke="#059669" stroke-width="0.5" opacity="0.4"/>
    </pattern>
  </defs>

  <!-- White background -->
  <rect width="680" height="420" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title" text-anchor="middle">LLM ARCHITECTURE POSITIONING</text>
  <text x="340" y="44" class="subtitle">Proper LLM Architecture Placement</text>

  <!-- Layer 1: Enhancement Layer (LLM) - Purple (Top) -->
  <g transform="translate(100, 65)">
    <!-- Layer label badge -->
    <rect x="0" y="15" width="80" height="24" fill="#7c3aed" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="40" y="32" class="layer-label">ENHANCE</text>

    <!-- Main box -->
    <rect x="95" y="0" width="385" height="80" fill="#ddd6fe" stroke="#1a1a1a" stroke-width="1.5"/>
    <rect x="95" y="0" width="385" height="80" fill="url(#dots-enhance)"/>
    <text x="287" y="25" class="box-text">Enhancement Layer (LLM)</text>
    <text x="287" y="42" class="label">ENHANCEMENT LAYER</text>

    <!-- Task items -->
    <g transform="translate(115, 50)">
      <rect x="0" y="0" width="100" height="22" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="50" y="15" class="label">Info Extraction</text>

      <rect x="115" y="0" width="100" height="22" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="165" y="15" class="label">Report Generation</text>

      <rect x="230" y="0" width="100" height="22" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="280" y="15" class="label">Research Assist</text>
    </g>
  </g>

  <!-- Arrow between Layer 1 and 2 -->
  <line x1="340" y1="150" x2="340" y2="175" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Layer 2: Decision Layer - Cyan (Middle) -->
  <g transform="translate(100, 185)">
    <!-- Layer label badge -->
    <rect x="0" y="15" width="80" height="24" fill="#0891b2" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="40" y="32" class="layer-label">DECIDE</text>

    <!-- Main box -->
    <rect x="95" y="0" width="385" height="80" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5"/>
    <rect x="95" y="0" width="385" height="80" fill="url(#diagonal-decide)"/>
    <text x="287" y="25" class="box-text">Decision Layer (Rules + ML)</text>
    <text x="287" y="42" class="label">DECISION LAYER (RULES + ML)</text>

    <!-- Task items -->
    <g transform="translate(115, 50)">
      <rect x="0" y="0" width="100" height="22" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="50" y="15" class="label">Signal Generation</text>

      <rect x="115" y="0" width="100" height="22" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="165" y="15" class="label">Risk Review</text>

      <rect x="230" y="0" width="100" height="22" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="280" y="15" class="label">Position Sizing</text>
    </g>
  </g>

  <!-- Arrow between Layer 2 and 3 -->
  <line x1="340" y1="270" x2="340" y2="295" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Layer 3: Execution Layer - Green (Bottom) -->
  <g transform="translate(100, 305)">
    <!-- Layer label badge -->
    <rect x="0" y="15" width="80" height="24" fill="#059669" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="40" y="32" class="layer-label">EXECUTE</text>

    <!-- Main box -->
    <rect x="95" y="0" width="385" height="70" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5"/>
    <rect x="95" y="0" width="385" height="70" fill="url(#grid-exec)"/>
    <text x="287" y="25" class="box-text">Execution Layer (Deterministic)</text>
    <text x="287" y="42" class="label">EXECUTION LAYER (DETERMINISTIC)</text>

    <!-- Task items -->
    <g transform="translate(145, 50)">
      <rect x="0" y="0" width="100" height="18" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="50" y="13" class="label">Order Management</text>

      <rect x="185" y="0" width="100" height="18" fill="#fff" stroke="#1a1a1a" stroke-width="0.5" rx="2"/>
      <text x="235" y="13" class="label">Fill Processing</text>
    </g>
  </g>

  <!-- Key principle annotation -->
  <rect x="520" y="140" width="140" height="100" fill="none" stroke="#7c3aed" stroke-width="1.5" stroke-dasharray="6,3" rx="4"/>
  <text x="590" y="165" class="label" style="fill: #7c3aed;">LLM Can Only</text>
  <text x="590" y="180" class="label" style="fill: #7c3aed;">Affect Enhancement</text>
  <text x="590" y="200" class="label" style="fill: #7c3aed;">Cannot Directly</text>
  <text x="590" y="215" class="label" style="fill: #7c3aed;">Control Decisions</text>

  <!-- Bracket connecting constraint to layers 2 and 3 -->
  <path d="M 505 185 Q 515 245 505 305" fill="none" stroke="#666" stroke-width="1" stroke-dasharray="4,2"/>

  <!-- Legend -->
  <g transform="translate(100, 395)">
    <rect x="0" y="0" width="12" height="12" fill="#ddd6fe" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="0" y="0" width="12" height="12" fill="url(#dots-enhance)"/>
    <text x="18" y="10" class="label" text-anchor="start">ENHANCE (LLM)</text>

    <rect x="140" y="0" width="12" height="12" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="140" y="0" width="12" height="12" fill="url(#diagonal-decide)"/>
    <text x="158" y="10" class="label" text-anchor="start">DECIDE (RULES+ML)</text>

    <rect x="310" y="0" width="12" height="12" fill="#d1fae5" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="310" y="0" width="12" height="12" fill="url(#grid-exec)"/>
    <text x="328" y="10" class="label" text-anchor="start">EXECUTE (DETERMINISTIC)</text>
  </g>
</svg>
