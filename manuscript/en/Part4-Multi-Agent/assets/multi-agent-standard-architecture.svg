<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 520">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-small { font: 500 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; letter-spacing: 1px; }
      .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>

    <!-- Dots pattern for Meta Agent -->
    <pattern id="dots" width="8" height="8" patternUnits="userSpaceOnUse">
      <circle cx="4" cy="4" r="1.2" fill="#0891b2" opacity="0.4"/>
    </pattern>

    <!-- Diagonal lines for Signal Agent -->
    <pattern id="diagonal-right" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#0d9488" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Horizontal lines for Regime Agent -->
    <pattern id="horizontal" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="3" x2="6" y2="3" stroke="#0891b2" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Crosshatch for Position Agent -->
    <pattern id="crosshatch" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="0" x2="6" y2="6" stroke="#db2777" stroke-width="0.6" opacity="0.4"/>
      <line x1="6" y1="0" x2="0" y2="6" stroke="#db2777" stroke-width="0.6" opacity="0.4"/>
    </pattern>

    <!-- Vertical lines for Risk Agent -->
    <pattern id="vertical" width="5" height="5" patternUnits="userSpaceOnUse">
      <line x1="2.5" y1="0" x2="2.5" y2="5" stroke="#ca8a04" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Grid pattern for Execution Agent -->
    <pattern id="grid" width="8" height="8" patternUnits="userSpaceOnUse">
      <rect width="8" height="8" fill="none"/>
      <path d="M 8 0 L 0 0 0 8" fill="none" stroke="#059669" stroke-width="0.5" opacity="0.4"/>
    </pattern>
  </defs>

  <!-- White background -->
  <rect width="680" height="520" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title" text-anchor="middle">MULTI-AGENT STANDARD ARCHITECTURE</text>
  <text x="340" y="44" class="subtitle">Multi-Agent Standard Architecture</text>

  <!-- Meta Agent - Top (with dots pattern) -->
  <rect x="140" y="60" width="400" height="65" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="140" y="60" width="400" height="65" fill="url(#dots)"/>
  <text x="340" y="90" class="box-text">Meta Agent</text>
  <text x="340" y="108" class="label">Regime Detection + Task Routing + Arbitration + Global Monitoring</text>
  <text x="340" y="120" class="label" style="fill: #999;">REGIME DETECTION + TASK ROUTING + ARBITRATION</text>

  <!-- Arrow down from Meta -->
  <line x1="340" y1="125" x2="340" y2="155" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Three Functional Agents Row -->
  <!-- Signal Agent - Teal with diagonal lines -->
  <rect x="70" y="170" width="150" height="70" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="70" y="170" width="150" height="70" fill="url(#diagonal-right)"/>
  <text x="145" y="200" class="box-text">Signal Agent</text>
  <text x="145" y="220" class="label">Signal Generation</text>

  <!-- Regime Agent - Cyan with horizontal lines -->
  <rect x="265" y="170" width="150" height="70" fill="#67e8f9" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="265" y="170" width="150" height="70" fill="url(#horizontal)"/>
  <text x="340" y="200" class="box-text">Regime Agent</text>
  <text x="340" y="220" class="label">Market Regime Detection</text>

  <!-- Position Agent - Pink with crosshatch -->
  <rect x="460" y="170" width="150" height="70" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="460" y="170" width="150" height="70" fill="url(#crosshatch)"/>
  <text x="535" y="200" class="box-text">Position Agent</text>
  <text x="535" y="220" class="label">Position Management</text>

  <!-- Branching arrows from Meta to Functional Agents -->
  <line x1="200" y1="155" x2="145" y2="170" stroke="#666" stroke-width="1.5"/>
  <line x1="340" y1="155" x2="340" y2="170" stroke="#666" stroke-width="1.5"/>
  <line x1="480" y1="155" x2="535" y2="170" stroke="#666" stroke-width="1.5"/>

  <!-- Converging lines from Functional Agents to Risk Agent -->
  <line x1="145" y1="240" x2="145" y2="280" stroke="#666" stroke-width="1.5"/>
  <line x1="340" y1="240" x2="340" y2="280" stroke="#666" stroke-width="1.5"/>
  <line x1="535" y1="240" x2="535" y2="280" stroke="#666" stroke-width="1.5"/>

  <line x1="145" y1="280" x2="340" y2="310" stroke="#666" stroke-width="1.5"/>
  <line x1="340" y1="280" x2="340" y2="310" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="535" y1="280" x2="340" y2="310" stroke="#666" stroke-width="1.5"/>

  <!-- Risk Agent - Yellow with vertical lines (emphasis with thicker border) -->
  <rect x="140" y="320" width="400" height="75" fill="#fde047" stroke="#1a1a1a" stroke-width="2"/>
  <rect x="140" y="320" width="400" height="75" fill="url(#vertical)"/>
  <text x="340" y="350" class="box-text">Risk Agent</text>
  <text x="340" y="368" class="label">Order Review + Forced Stop Loss + Risk Budget Management</text>
  <text x="340" y="382" class="label" style="fill: #999;">ORDER REVIEW + STOP LOSS + RISK BUDGET</text>

  <!-- Veto Power indicator -->
  <rect x="555" y="335" width="100" height="30" fill="#ef4444" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="605" y="355" class="box-text-small" fill="#fff">VETO POWER</text>
  <text x="555" y="375" class="label" text-anchor="start" style="fill: #ef4444;">VETO POWER</text>

  <!-- Arrow pointing to veto -->
  <line x1="540" y1="345" x2="553" y2="350" stroke="#ef4444" stroke-width="1.5" marker-end="url(#arrow-red)"/>

  <!-- Arrow down from Risk Agent to Execution Agent -->
  <line x1="340" y1="395" x2="340" y2="425" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Execution Agent - Green with grid pattern -->
  <rect x="190" y="435" width="300" height="60" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="190" y="435" width="300" height="60" fill="url(#grid)"/>
  <text x="340" y="462" class="box-text">Execution Agent</text>
  <text x="340" y="480" class="label">Optimal Execution + Order Management / OPTIMAL EXECUTION</text>

  <!-- Legend for patterns -->
  <g transform="translate(60, 505)">
    <rect x="0" y="0" width="12" height="12" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="0" y="0" width="12" height="12" fill="url(#dots)"/>
    <text x="18" y="10" class="label" text-anchor="start">META</text>

    <rect x="70" y="0" width="12" height="12" fill="#5eead4" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="70" y="0" width="12" height="12" fill="url(#diagonal-right)"/>
    <text x="88" y="10" class="label" text-anchor="start">SIGNAL</text>

    <rect x="150" y="0" width="12" height="12" fill="#67e8f9" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="150" y="0" width="12" height="12" fill="url(#horizontal)"/>
    <text x="168" y="10" class="label" text-anchor="start">REGIME</text>

    <rect x="235" y="0" width="12" height="12" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="235" y="0" width="12" height="12" fill="url(#crosshatch)"/>
    <text x="253" y="10" class="label" text-anchor="start">POSITION</text>

    <rect x="330" y="0" width="12" height="12" fill="#fde047" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="330" y="0" width="12" height="12" fill="url(#vertical)"/>
    <text x="348" y="10" class="label" text-anchor="start">RISK</text>

    <rect x="400" y="0" width="12" height="12" fill="#d1fae5" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="400" y="0" width="12" height="12" fill="url(#grid)"/>
    <text x="418" y="10" class="label" text-anchor="start">EXECUTION</text>
  </g>
</svg>
