<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 480">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-small { font: 500 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; letter-spacing: 1px; }
      .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
      .desc-text { font: 400 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>

    <!-- Dots pattern for Evolution Agent -->
    <pattern id="dots-purple" width="8" height="8" patternUnits="userSpaceOnUse">
      <circle cx="4" cy="4" r="1.2" fill="#7c3aed" opacity="0.4"/>
    </pattern>

    <!-- Diagonal lines for Signal Agent -->
    <pattern id="diagonal-teal" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#0d9488" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Horizontal lines for Regime Agent -->
    <pattern id="horizontal-cyan" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="3" x2="6" y2="3" stroke="#0891b2" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Vertical lines for Risk Agent -->
    <pattern id="vertical-yellow" width="5" height="5" patternUnits="userSpaceOnUse">
      <line x1="2.5" y1="0" x2="2.5" y2="5" stroke="#ca8a04" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Grid pattern for Performance Tracker -->
    <pattern id="grid-green" width="8" height="8" patternUnits="userSpaceOnUse">
      <rect width="8" height="8" fill="none"/>
      <path d="M 8 0 L 0 0 0 8" fill="none" stroke="#059669" stroke-width="0.5" opacity="0.4"/>
    </pattern>
  </defs>

  <!-- White background -->
  <rect width="680" height="480" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title" text-anchor="middle">EVOLUTION AGENT ARCHITECTURE</text>
  <text x="340" y="44" class="subtitle">Multi-Agent Coordinated Evolution</text>

  <!-- Evolution Agent - Top (Purple with dots pattern) -->
  <rect x="140" y="65" width="400" height="75" fill="#ddd6fe" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="140" y="65" width="400" height="75" fill="url(#dots-purple)"/>
  <text x="340" y="95" class="box-text">Evolution Agent</text>
  <text x="340" y="113" class="label">Monitor All Agent Performance, Decide Evolution Strategy</text>
  <text x="340" y="127" class="label" style="fill: #999;">MONITOR PERFORMANCE + DECIDE EVOLUTION STRATEGY</text>

  <!-- Arrow down from Evolution Agent -->
  <line x1="340" y1="140" x2="340" y2="175" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Three Functional Agents Row -->
  <!-- Signal Agent - Teal -->
  <rect x="70" y="195" width="150" height="80" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="70" y="195" width="150" height="80" fill="url(#diagonal-teal)"/>
  <text x="145" y="225" class="box-text">Signal</text>
  <text x="145" y="242" class="box-text">Agent</text>
  <text x="145" y="262" class="label">Signal Generation</text>

  <!-- Regime Agent - Cyan -->
  <rect x="265" y="195" width="150" height="80" fill="#67e8f9" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="265" y="195" width="150" height="80" fill="url(#horizontal-cyan)"/>
  <text x="340" y="225" class="box-text">Regime</text>
  <text x="340" y="242" class="box-text">Agent</text>
  <text x="340" y="262" class="label">Market Regime Detection</text>

  <!-- Risk Agent - Yellow -->
  <rect x="460" y="195" width="150" height="80" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="460" y="195" width="150" height="80" fill="url(#vertical-yellow)"/>
  <text x="535" y="225" class="box-text">Risk</text>
  <text x="535" y="242" class="box-text">Agent</text>
  <text x="535" y="262" class="label">Risk Control</text>

  <!-- Branching lines from Evolution to Functional Agents -->
  <line x1="200" y1="175" x2="145" y2="195" stroke="#666" stroke-width="1.5"/>
  <line x1="340" y1="175" x2="340" y2="195" stroke="#666" stroke-width="1.5"/>
  <line x1="480" y1="175" x2="535" y2="195" stroke="#666" stroke-width="1.5"/>

  <!-- Converging lines from Functional Agents to Performance Tracker -->
  <line x1="145" y1="275" x2="145" y2="310" stroke="#666" stroke-width="1.5"/>
  <line x1="340" y1="275" x2="340" y2="310" stroke="#666" stroke-width="1.5"/>
  <line x1="535" y1="275" x2="535" y2="310" stroke="#666" stroke-width="1.5"/>

  <line x1="145" y1="310" x2="340" y2="340" stroke="#666" stroke-width="1.5"/>
  <line x1="340" y1="310" x2="340" y2="340" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="535" y1="310" x2="340" y2="340" stroke="#666" stroke-width="1.5"/>

  <!-- Performance Tracker - Green -->
  <rect x="140" y="355" width="400" height="85" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="140" y="355" width="400" height="85" fill="url(#grid-green)"/>
  <text x="340" y="385" class="box-text">Performance Tracker</text>
  <text x="340" y="403" class="label">Records Historical Performance of Each Agent</text>
  <text x="340" y="420" class="desc-text">Accuracy | Latency | Stability | Version History</text>
  <text x="340" y="432" class="label" style="fill: #999;">ACCURACY | LATENCY | STABILITY | VERSION HISTORY</text>

  <!-- Feedback arrow from Performance Tracker back to Evolution Agent -->
  <path d="M 560 397 Q 620 397 620 150 Q 620 100 540 100"
        fill="none" stroke="#666" stroke-width="1.5" stroke-dasharray="6,3"/>
  <polygon points="540,96 550,100 540,104" fill="#666"/>
  <text x="635" y="250" class="label" style="writing-mode: vertical-rl; text-orientation: mixed;">FEEDBACK</text>

  <!-- Legend -->
  <g transform="translate(60, 465)">
    <rect x="0" y="0" width="12" height="12" fill="#ddd6fe" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="0" y="0" width="12" height="12" fill="url(#dots-purple)"/>
    <text x="18" y="10" class="label" text-anchor="start">EVOLUTION</text>

    <rect x="110" y="0" width="12" height="12" fill="#5eead4" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="110" y="0" width="12" height="12" fill="url(#diagonal-teal)"/>
    <text x="128" y="10" class="label" text-anchor="start">SIGNAL</text>

    <rect x="200" y="0" width="12" height="12" fill="#67e8f9" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="200" y="0" width="12" height="12" fill="url(#horizontal-cyan)"/>
    <text x="218" y="10" class="label" text-anchor="start">REGIME</text>

    <rect x="290" y="0" width="12" height="12" fill="#fde047" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="290" y="0" width="12" height="12" fill="url(#vertical-yellow)"/>
    <text x="308" y="10" class="label" text-anchor="start">RISK</text>

    <rect x="370" y="0" width="12" height="12" fill="#d1fae5" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="370" y="0" width="12" height="12" fill="url(#grid-green)"/>
    <text x="388" y="10" class="label" text-anchor="start">TRACKER</text>
  </g>
</svg>
