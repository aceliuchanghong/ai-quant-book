<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 400">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .label-left { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: start; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-small { font: 500 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; letter-spacing: 1px; }
      .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
      .percent-large { font: 700 18px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .metric-text { font: 400 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: start; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>

    <!-- Pattern for production version -->
    <pattern id="diagonal-prod" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#0d9488" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Pattern for test version -->
    <pattern id="dots-test" width="8" height="8" patternUnits="userSpaceOnUse">
      <circle cx="4" cy="4" r="1.2" fill="#ca8a04" opacity="0.5"/>
    </pattern>

    <!-- Pattern for metrics box -->
    <pattern id="grid-metrics" width="8" height="8" patternUnits="userSpaceOnUse">
      <rect width="8" height="8" fill="none"/>
      <path d="M 8 0 L 0 0 0 8" fill="none" stroke="#3b82f6" stroke-width="0.5" opacity="0.3"/>
    </pattern>
  </defs>

  <!-- White background -->
  <rect width="680" height="400" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title" text-anchor="middle">A/B TEST TRAFFIC ALLOCATION</text>
  <text x="340" y="44" class="subtitle">Agent-Level Canary Deployment</text>

  <!-- Traffic allocation header -->
  <text x="100" y="75" class="box-text" text-anchor="start">Traffic Allocation</text>
  <text x="100" y="90" class="label" text-anchor="start">TRAFFIC ALLOCATION</text>

  <!-- 90% traffic arrow to production -->
  <g transform="translate(100, 105)">
    <line x1="0" y1="30" x2="120" y2="30" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="60" y="20" class="percent-large">90%</text>
    <text x="60" y="50" class="label">TRAFFIC</text>
  </g>

  <!-- Production version box - Teal -->
  <rect x="240" y="100" width="200" height="70" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="240" y="100" width="200" height="70" fill="url(#diagonal-prod)"/>
  <text x="340" y="130" class="box-text">Signal Agent v1.0</text>
  <text x="340" y="150" class="label">PRODUCTION</text>

  <!-- 10% traffic arrow to test -->
  <g transform="translate(100, 185)">
    <line x1="0" y1="30" x2="120" y2="30" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="60" y="20" class="percent-large">10%</text>
    <text x="60" y="50" class="label">TRAFFIC</text>
  </g>

  <!-- Test version box - Yellow -->
  <rect x="240" y="180" width="200" height="70" fill="#fef08a" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="240" y="180" width="200" height="70" fill="url(#dots-test)"/>
  <text x="340" y="210" class="box-text">Signal Agent v1.1</text>
  <text x="340" y="230" class="label">CANARY</text>

  <!-- Arrows to metrics boxes -->
  <line x1="440" y1="135" x2="480" y2="135" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="440" y1="215" x2="480" y2="215" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Metrics comparison box -->
  <rect x="500" y="100" width="160" height="150" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5"/>
  <rect x="500" y="100" width="160" height="150" fill="url(#grid-metrics)"/>
  <text x="580" y="125" class="box-text-small">Independent Metrics</text>
  <text x="580" y="140" class="label">INDEPENDENT METRICS</text>

  <!-- Metrics list -->
  <g transform="translate(515, 155)">
    <circle cx="5" cy="5" r="3" fill="#5eead4" stroke="#1a1a1a" stroke-width="1"/>
    <text x="15" y="9" class="metric-text">Signal Accuracy</text>

    <circle cx="5" cy="25" r="3" fill="#5eead4" stroke="#1a1a1a" stroke-width="1"/>
    <text x="15" y="29" class="metric-text">Return Contribution</text>

    <circle cx="5" cy="45" r="3" fill="#5eead4" stroke="#1a1a1a" stroke-width="1"/>
    <text x="15" y="49" class="metric-text">Max Drawdown</text>

    <circle cx="80" cy="5" r="3" fill="#fef08a" stroke="#1a1a1a" stroke-width="1"/>
    <circle cx="80" cy="25" r="3" fill="#fef08a" stroke="#1a1a1a" stroke-width="1"/>
    <circle cx="80" cy="45" r="3" fill="#fef08a" stroke="#1a1a1a" stroke-width="1"/>
  </g>

  <!-- Promotion flow at bottom -->
  <rect x="100" y="280" width="480" height="90" fill="none" stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="6,3" rx="4"/>
  <text x="340" y="300" class="box-text-small" style="fill: #3b82f6;">When v1.1 outperforms v1.0 for N consecutive days (p&lt;0.05)</text>

  <!-- Promotion arrow sequence -->
  <g transform="translate(120, 320)">
    <rect x="0" y="0" width="60" height="30" fill="#fef08a" stroke="#1a1a1a" stroke-width="1"/>
    <text x="30" y="20" class="label">10%</text>

    <line x1="68" y1="15" x2="90" y2="15" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>

    <rect x="98" y="0" width="60" height="30" fill="#fef08a" stroke="#1a1a1a" stroke-width="1"/>
    <text x="128" y="20" class="label">30%</text>

    <line x1="166" y1="15" x2="188" y2="15" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>

    <rect x="196" y="0" width="60" height="30" fill="#fef08a" stroke="#1a1a1a" stroke-width="1"/>
    <text x="226" y="20" class="label">50%</text>

    <line x1="264" y1="15" x2="286" y2="15" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>

    <rect x="294" y="0" width="60" height="30" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
    <text x="324" y="20" class="label" style="font-weight: 600;">100%</text>
  </g>

  <text x="340" y="365" class="label" style="fill: #3b82f6;">Gradual Traffic Promotion to Full Deployment</text>
  <text x="340" y="378" class="label" style="fill: #999;">GRADUAL TRAFFIC PROMOTION TO FULL DEPLOYMENT</text>
</svg>
