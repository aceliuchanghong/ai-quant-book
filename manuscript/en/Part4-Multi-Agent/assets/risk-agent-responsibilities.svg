<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 480">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 14px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-small { font: 500 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; letter-spacing: 1px; }
      .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
      .detail { font: 500 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; }
      .principle { font: 600 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #ef4444; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>

    <!-- Vertical lines pattern for Risk Agent -->
    <pattern id="vertical-risk" width="5" height="5" patternUnits="userSpaceOnUse">
      <line x1="2.5" y1="0" x2="2.5" y2="5" stroke="#ca8a04" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Diagonal pattern for Approval -->
    <pattern id="diagonal-approval" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#059669" stroke-width="0.8" opacity="0.4"/>
    </pattern>

    <!-- Horizontal pattern for Monitoring -->
    <pattern id="horizontal-monitor" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="3" x2="6" y2="3" stroke="#0891b2" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Dots pattern for Attribution -->
    <pattern id="dots-attr" width="6" height="6" patternUnits="userSpaceOnUse">
      <circle cx="3" cy="3" r="1" fill="#7c3aed" opacity="0.4"/>
    </pattern>

    <!-- Crosshatch pattern for Circuit-break -->
    <pattern id="crosshatch-circuit" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="0" x2="6" y2="6" stroke="#dc2626" stroke-width="0.6" opacity="0.4"/>
      <line x1="6" y1="0" x2="0" y2="6" stroke="#dc2626" stroke-width="0.6" opacity="0.4"/>
    </pattern>
  </defs>

  <!-- White background -->
  <rect width="680" height="480" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title" text-anchor="middle">RISK AGENT RESPONSIBILITIES</text>
  <text x="340" y="44" class="subtitle">Risk Agent Core Responsibilities</text>

  <!-- Central Risk Agent -->
  <rect x="225" y="175" width="230" height="110" fill="#fde047" stroke="#1a1a1a" stroke-width="2"/>
  <rect x="225" y="175" width="230" height="110" fill="url(#vertical-risk)"/>
  <text x="340" y="210" class="box-text">Risk Agent</text>
  <text x="340" y="230" class="label">Risk Control Agent</text>

  <!-- Core principle box -->
  <rect x="245" y="242" width="190" height="35" fill="#fff" stroke="#ef4444" stroke-width="1.5" rx="2"/>
  <text x="340" y="260" class="principle">Independent | Veto | Immutable</text>
  <text x="340" y="273" class="label" style="fill: #ef4444;">INDEPENDENT | VETO | IMMUTABLE</text>

  <!-- Four Responsibilities around the center -->

  <!-- 1. Approval (top-left) -->
  <rect x="50" y="65" width="160" height="95" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <rect x="50" y="65" width="160" height="95" fill="url(#diagonal-approval)"/>
  <text x="130" y="90" class="box-text">Pre-Trade</text>
  <text x="130" y="108" class="label">PRE-TRADE APPROVAL</text>
  <line x1="60" y1="118" x2="200" y2="118" stroke="#ccc" stroke-width="1"/>
  <text x="60" y="135" class="detail">- Check position limits</text>
  <text x="60" y="150" class="detail">- Verify risk budget</text>

  <!-- Arrow from Approval to Risk Agent -->
  <path d="M 180 160 Q 220 175 225 200" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Decision labels -->
  <rect x="60" y="160" width="100" height="18" fill="#d1fae5" stroke="#059669" stroke-width="1" rx="2"/>
  <text x="110" y="172" class="label" style="fill: #059669;">Pass/Reduce/Reject</text>

  <!-- 2. Monitoring (top-right) -->
  <rect x="470" y="65" width="160" height="95" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <rect x="470" y="65" width="160" height="95" fill="url(#horizontal-monitor)"/>
  <text x="550" y="90" class="box-text">Real-Time</text>
  <text x="550" y="108" class="label">REAL-TIME MONITORING</text>
  <line x1="480" y1="118" x2="620" y2="118" stroke="#ccc" stroke-width="1"/>
  <text x="480" y="135" class="detail">- Monitor position P&amp;L</text>
  <text x="480" y="150" class="detail">- Trigger stop loss/profit</text>

  <!-- Arrow from Risk Agent to Monitoring -->
  <path d="M 455 200 Q 475 175 470 160" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Alert indicator -->
  <rect x="540" y="160" width="80" height="18" fill="#fef3c7" stroke="#f59e0b" stroke-width="1" rx="2"/>
  <text x="580" y="172" class="label" style="fill: #b45309;">Drawdown Alert</text>

  <!-- 3. Attribution (bottom-left) -->
  <rect x="50" y="310" width="160" height="95" fill="#ede9fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <rect x="50" y="310" width="160" height="95" fill="url(#dots-attr)"/>
  <text x="130" y="335" class="box-text">Post-Trade</text>
  <text x="130" y="353" class="label">POST-TRADE ATTRIBUTION</text>
  <line x1="60" y1="363" x2="200" y2="363" stroke="#ccc" stroke-width="1"/>
  <text x="60" y="380" class="detail">- Record risk metrics</text>
  <text x="60" y="395" class="detail">- Analyze drawdown causes</text>

  <!-- Arrow from Risk Agent to Attribution -->
  <path d="M 225 260 Q 200 285 180 310" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Analysis label -->
  <rect x="60" y="400" width="140" height="18" fill="#ede9fe" stroke="#7c3aed" stroke-width="1" rx="2"/>
  <text x="130" y="412" class="label" style="fill: #6d28d9;">Single? Corr? Black Swan?</text>

  <!-- 4. Circuit-break (bottom-right) -->
  <rect x="470" y="310" width="160" height="95" fill="#fce7f3" stroke="#ef4444" stroke-width="2" rx="2"/>
  <rect x="470" y="310" width="160" height="95" fill="url(#crosshatch-circuit)"/>
  <text x="550" y="335" class="box-text">Circuit Breaker</text>
  <text x="550" y="353" class="label">CIRCUIT BREAKER</text>
  <line x1="480" y1="363" x2="620" y2="363" stroke="#ccc" stroke-width="1"/>
  <text x="480" y="380" class="detail">- Trigger global de-risk</text>
  <text x="480" y="395" class="detail">- Start cooling period</text>

  <!-- Arrow from Risk Agent to Circuit-break -->
  <path d="M 455 260 Q 480 285 500 310" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Emergency indicator -->
  <rect x="520" y="400" width="90" height="18" fill="#fecaca" stroke="#dc2626" stroke-width="1" rx="2"/>
  <text x="565" y="412" class="label" style="fill: #dc2626;">Notify All Agents</text>

  <!-- Connecting lines showing flow -->
  <!-- Workflow indicator at bottom -->
  <rect x="180" y="440" width="320" height="30" fill="#f9fafb" stroke="#ccc" stroke-width="1" rx="2"/>
  <text x="340" y="460" class="label">Workflow: Pre-Trade -> Real-Time -> Post-Trade | Circuit Breaker Anytime</text>

  <!-- Legend for patterns -->
  <g transform="translate(50, 440)">
    <rect x="0" y="0" width="12" height="12" fill="#d1fae5" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="0" y="0" width="12" height="12" fill="url(#diagonal-approval)"/>
    <text x="16" y="10" class="label" text-anchor="start">APPROVE</text>

    <rect x="62" y="0" width="12" height="12" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="62" y="0" width="12" height="12" fill="url(#horizontal-monitor)"/>
    <text x="78" y="10" class="label" text-anchor="start">MONITOR</text>

    <rect x="505" y="0" width="12" height="12" fill="#ede9fe" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="505" y="0" width="12" height="12" fill="url(#dots-attr)"/>
    <text x="521" y="10" class="label" text-anchor="start">ATTRIBUTE</text>

    <rect x="580" y="0" width="12" height="12" fill="#fce7f3" stroke="#1a1a1a" stroke-width="0.5"/>
    <rect x="580" y="0" width="12" height="12" fill="url(#crosshatch-circuit)"/>
    <text x="596" y="10" class="label" text-anchor="start">CIRCUIT</text>
  </g>
</svg>
